<!-- Header -->
<div style="background:white; border-bottom:1px solid #ddd; padding:1rem; position:sticky; top:0; z-index:100;">
	<div style="max-width:800px; margin:0 auto; display:flex; justify-content:space-between; align-items:center;">
		<h1 style="margin:0; color:#333; font-size:24px; font-weight:600;">ðŸ’– People Who Liked You</h1>
		<div style="color:#666; font-size:14px;">
			{{ totalElements() }} likes
		</div>
	</div>
</div>

<!-- Loading State (first load) -->
<div *ngIf="isLoading() && likedByUsers().length === 0"
	style="max-width:800px; margin:2rem auto; padding:2rem; text-align:center;">
	<div style="color:#666; font-size:18px;">Loading users who liked you...</div>
</div>

<!-- No Likes -->
<div *ngIf="!isLoading() && likedByUsers().length === 0"
	style="max-width:800px; margin:4rem auto; padding:2rem; text-align:center;">
	<div style="color:#666; font-size:18px; margin-bottom:1rem;">ðŸ’”</div>
	<div style="color:#333; font-size:20px; font-weight:600; margin-bottom:0.5rem;">No likes yet</div>
	<div style="color:#666; font-size:16px;">When someone likes your profile, they'll appear here!</div>
</div>

<!-- Liked By Users Grid -->
<div *ngIf="likedByUsers().length > 0" style="max-width:800px; margin:2rem auto; padding:0 1rem;">
	<div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(300px, 1fr)); gap:1.5rem;">

		<!-- User Card -->
		<div *ngFor="let user of likedByUsers()" (click)="viewProfile(user.username)"
			style="background:white; border:1px solid #ddd; border-radius:16px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s, box-shadow 0.2s; cursor:pointer; position:relative;"
			onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 24px rgba(0,0,0,0.15)'"
			onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)'"
		title="Click to view profile details">

	<!-- Status Badge -->
	<div *ngIf="user.matched"
		style="position:absolute; top:10px; right:10px; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:white; padding:6px 12px; border-radius:20px; font-size:14px; font-weight:600; z-index:10; backdrop-filter:blur(5px); box-shadow:0 4px 12px rgba(102,126,234,0.4);">
		ðŸ’‘ MATCHED
	</div>
	<div *ngIf="!user.matched"
		style="position:absolute; top:10px; right:10px; background:rgba(255,20,147,0.9); color:white; padding:6px 12px; border-radius:20px; font-size:14px; font-weight:600; z-index:10; backdrop-filter:blur(5px); box-shadow:0 4px 12px rgba(255,20,147,0.4);">
		ðŸ’– LIKED
	</div>

	<!-- Image Carousel -->
	<div style="position:relative; height:300px; overflow:hidden;">
				<!-- Main Image -->
				<img [src]="getCurrentImageUrl(user) || '/uploads/default-avatar.png'" [alt]="user.username + ' photo'"
					style="width:100%; height:100%; object-fit:cover;"
					onerror="this.src='https://via.placeholder.com/300x300?text=No+Image'">

				<!-- Navigation Arrows (only show if multiple images) -->
				<div *ngIf="getUserImages(user).length > 1">
					<!-- Left Arrow -->
					<button (click)="previousImage(user.username); $event.stopPropagation()"
						style="position:absolute; left:10px; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:white; border:none; border-radius:50%; width:40px; height:40px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:18px; transition:background 0.2s;"
						onmouseover="this.style.background='rgba(0,0,0,0.7)'"
						onmouseout="this.style.background='rgba(0,0,0,0.5)'">
						&#8249;
					</button>

					<!-- Right Arrow -->
					<button (click)="nextImage(user.username); $event.stopPropagation()"
						style="position:absolute; right:10px; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.5); color:white; border:none; border-radius:50%; width:40px; height:40px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:18px; transition:background 0.2s;"
						onmouseover="this.style.background='rgba(0,0,0,0.7)'"
						onmouseout="this.style.background='rgba(0,0,0,0.5)'">
						&#8250;
					</button>

					<!-- Image Indicators -->
					<div style="position:absolute; bottom:10px; left:50%; transform:translateX(-50%); display:flex; gap:6px;">
						<div *ngFor="let image of getUserImages(user); let i = index"
							[style.background]="i === getCurrentImageIndex(user.username) ? 'white' : 'rgba(255,255,255,0.5)'"
							style="width:8px; height:8px; border-radius:50%; transition:background 0.2s; cursor:pointer;"
							(click)="setImageIndex(user.username, i); $event.stopPropagation()">
						</div>
					</div>
				</div>
			</div>

			<!-- User Info -->
			<div style="padding:1rem;">
				<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
					<h3 style="margin:0; color:#333; font-size:18px; font-weight:600;">{{ user.username }}</h3>
					<div style="color:#666; font-size:14px;">{{ calculateAge(user.dateOfBirth) }} years</div>
				</div>
			</div>
		</div>
		</div>
		</div>
		
		<!-- Loading More -->
<div *ngIf="isLoadingMore()" style="max-width:800px; margin:2rem auto; padding:1rem; text-align:center;">
	<div style="color:#666; font-size:16px;">Loading more users...</div>
</div>

<!-- End of List -->
<div *ngIf="last() && likedByUsers().length > 0"
	style="max-width:800px; margin:2rem auto; padding:1rem; text-align:center;">
	<div style="color:#666; font-size:16px;">You've seen all your liked-by users!</div>
</div>

<!-- User Detail Modal -->
<app-user-detail-modal [show]="showUserDetail()" (close)="closeUserDetailModal()"
	(likeStatusChanged)="onLikeStatusChanged($event)"
	(userBlocked)="onUserBlocked($event)">
</app-user-detail-modal>